type IP::Address::V6::NoSubnet::Compressed = Pattern[
  /\A:(:|(:[[:xdigit:]]{1,4}){1,7})\z/,
  /\A([[:xdigit:]]{1,4}:){1}(:|(:[[:xdigit:]]{1,4}){1,6})\z/,
  /\A([[:xdigit:]]{1,4}:){2}(:|(:[[:xdigit:]]{1,4}){1,5})\z/,
  /\A([[:xdigit:]]{1,4}:){3}(:|(:[[:xdigit:]]{1,4}){1,4})\z/,
  /\A([[:xdigit:]]{1,4}:){4}(:|(:[[:xdigit:]]{1,4}){1,3})\z/,
  /\A([[:xdigit:]]{1,4}:){5}(:|(:[[:xdigit:]]{1,4}){1,2})\z/,
  /\A([[:xdigit:]]{1,4}:){6}(:|(:[[:xdigit:]]{1,4}){1,1})\z/,
  /\A([[:xdigit:]]{1,4}:){7}:\z/,
  /\Afe80:(:|(:[[:xdigit:]]{1,4}){1,6})%[[:lower:]]{1,8}[[:digit:]]{1,4}\z/,
  /\Afe80:([[:xdigit:]]{1,4}:){1}(:|(:[[:xdigit:]]{1,4}){1,5})%[[:lower:]]{1,8}[[:digit:]]{1,4}\z/,
  /\Afe80:([[:xdigit:]]{1,4}:){2}(:|(:[[:xdigit:]]{1,4}){1,4})%[[:lower:]]{1,8}[[:digit:]]{1,4}\z/,
  /\Afe80:([[:xdigit:]]{1,4}:){3}(:|(:[[:xdigit:]]{1,4}){1,3})%[[:lower:]]{1,8}[[:digit:]]{1,4}\z/,
  /\Afe80:([[:xdigit:]]{1,4}:){4}(:|(:[[:xdigit:]]{1,4}){1,2})%[[:lower:]]{1,8}[[:digit:]]{1,4}\z/,
  /\Afe80:([[:xdigit:]]{1,4}:){5}(:|(:[[:xdigit:]]{1,4}){1,1})%[[:lower:]]{1,8}[[:digit:]]{1,4}\z/,
  /\Afe80:([[:xdigit:]]{1,4}:){6}:%[[:lower:]]{1,8}[[:digit:]]{1,4}\z/,
]
